{% extends 'base.html.twig' %}

{% block title %}Mon Compte{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1>Mon Compte</h1>
    <p>Bienvenue, {{ user.firstName }} {{ user.lastName }}</p>
    <ul>
        <li>Nom: {{ user.lastName }}</li>
        <li>Prénom: {{ user.firstName }}</li>
        <li>Email: {{ user.email }}</li>
        {% if user.phone %}
            <li>Téléphone: {{ user.phone }}</li>
        {% endif %}
        
        <!-- Lien pour modifier les informations utilisateur -->
        <a href="{{ path('app_user_edit', {id: user.id}) }}" class="btn btn-secondary btn-sm mt-3">Modifier mes informations</a>

        <!-- Afficher les adresses -->
        <h3 class="mt-4">Vos adresses</h3>
        <div class="row">
            <!-- Carte pour ajouter une nouvelle adresse -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 text-center border-dashed">
                    <div class="card-body d-flex align-items-center justify-content-center">
                        <a href="#" class="text-decoration-none">
                            <h5 class="card-title">Ajouter une adresse</h5>
                        </a>
                    </div>
                </div>
            </div>

            {% for address in user.userAdresse %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ address.addressName }}</h5>
                            <p>{{ address.address }}<br>{{ address.city }}, {{ address.zipCode }}<br>{{ address.country }}</p>
                           
                            <!-- Liens pour modifier ou supprimer l'adresse -->
                            <a href="{{ path('app_user_address_edit', {id: user.id, addressId: address.id}) }}" class="btn btn-primary btn-sm">Modifier</a>
                            <form method="post" action="{{ path('app_user_address_delete', {id: user.id, addressId: address.id}) }}" style="display:inline;">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ address.id) }}">
                                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette adresse ?');">Effacer</button>
                            </form>
                        </div>
                    </div>
                </div>
            {% else %}
                <p>Aucune adresse enregistrée.</p>
            {% endfor %}
        </div>
    </ul>
</div>
{% endblock %}